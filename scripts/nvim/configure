#!/bin/bash -e

INIT_VIM=$HOME/.config/nvim/init.vim

if [ ! -e "$INIT_VIM" ]; then
    mkdir -p $HOME/.config/nvim/
fi

if [ ! -f "~/.local/share/nvim/site/autoload/plug.vim"  ]; then
    curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \
        https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi
ln -s $DOTFILES/nvim/init.vim $INIT_VIM

# Install neovim lsp
./scripts/nvim/nightly-update

# Install python lsp
pip install --user jedi-language-server
python -m venv ~/.config/nvim/venv
~/.config/nvim/venv/bin/pip install -U pip
~/.config/nvim/venv/bin/pip install pynvim

# Install bash lsp
npm i -g bash-language-server

# Install docker lsp
npm install -g dockerfile-language-server-nodejs

# Instal vim lsp
npm install -g vim-language-server

# Install yaml language server
npm install -g yaml-language-server

# nvim +PlugInstall +qall # TODO check why generate error reading from input
